<!doctype html>
<html>
<head>
  <!-- Plotly.js -->
  <script src="./node_modules/plotly.js-dist-min/plotly.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.2.0/require.min.js"></script>
  <script>
    require.config({
      paths: {
        'plotly': './node_modules/plotly.js-dist-min/plotly.min',
        'plotlyjs-finance': 'https://cdn.rawgit.com/etpinard/plotlyjs-finance/master/plotlyjs-finance',
        // añadir papaparse como módulo para que RequireJS lo cargue correctamente
        'papaparse': 'https://unpkg.com/papaparse@5.4.1/papaparse.min'
      },
      shim: {
        'plotlyjs-finance': {
          deps: ['plotly']
        }
      }
    });
    // cargar papaparse y luego tu script (o pásalo como dependencia en script.js si lo necesita)
    require(['plotly','plotlyjs-finance','papaparse'], function(Plotly, finance, Papa){
      // Plotly, el plugin y PapaParse ya cargaron; script.js también se ejecuta.
    });
  </script>
  <!-- <script src="https://unpkg.com/papaparse@5.4.1/papaparse.min.js"></script> -->
</head>
<body>
  <input id="fileInput" type="file" accept=".vak,.txt,.csv" />
  <div id="statusOutput" style="margin-top:10px;color:darkgreen"></div>
  <script src="script.js"></script>
  <div id="myDiv" style="width: calc(100% - 220px); height: 50rem; display:inline-block;"><!-- Plotly chart --></div>

  <!-- Navegador grande y legible -->
  <div style="width: calc(100% - 220px); margin-top:8px; display:inline-block;">
    <input id="navigator" type="range" min="0" value="0" step="1" style="width:100%;" />
    <div id="navigatorInfo" style="font-size:0.9rem;color:#333;margin-top:4px;"></div>
  </div>

  <!-- Panel derecho: selector de canales -->
  <aside id="channelPanel" style="width:200px; position:fixed; right:12px; top:60px; bottom:40px; overflow:auto;
                                   padding:10px; border:1px solid #ddd; background:#fafafa; box-shadow:0 2px 6px rgba(0,0,0,0.08);">
    <strong>Canales</strong>
    <div style="margin-top:8px;">
      <label><input type="checkbox" id="ch_all" /> Todos</label>
    </div>
    <div id="channelList" style="margin-top:8px;">
      <!-- checkboxes generados dinámicamente por script.js -->
    </div>
    <div style="margin-top:8px;">
      <button id="showSelected" style="width:100%">Mostrar</button>
    </div>
    <div style="margin-top:8px;">
      <button id="clearMarks" style="width:100%;">Borrar marcas</button>
    </div>
  </aside>
</body>
</html>